class RealTimeChart{constructor(t,e,n,i,o,l){var a,r,s,h,d,g,c,u,y,f,p,m,v,b,x="calibri",T=15,w="rgba(0,0,0,0.73)",S="rgba(14,56,87,0.56)",k=.5,E="rgba(0,0,0,0.32)",M="S",B=n,N=i,L=o,A=l,C="",H="",W="",z="",F=!1,P=1,O=new Array,j=0,I=new Array,R=new Array,X="C",J=1,V="J",Z=0,Y=0,q=1,D=!1,G=0,K=100,Q=0,U="T",$=!0,_=200,tt=0,et=new Array,nt=new Array,it=new Array,ot=0,lt=0,at=new Array,rt=new Array,st=new Array,ht=new Array,dt="-1",gt="R";function ct(t,e,n,i){if(1==F||1==i){dt=n;var o=E,l=P;t.width=t.offsetWidth,t.height=e;var a,r=t.getContext("2d");r.beginPath(),r.lineWidth=l,r.strokeStyle=o,r.lineCap="butt","S"==M&&r.moveTo(n,0),r.lineTo(n,e),r.stroke();for(var s=0;s<tt;s++)for(var h=0,d=0;d<st[s.toString()].length;d++)if(n<st[s.toString()][d]+1&&n>st[s.toString()][d]-1){h=d;var g=s+1;0==j&&(O[(2*g+1).toString()].innerHTML=ht[s.toString()][h].toFixed(3)),1==j&&(O[(3*g+2).toString()].innerHTML=ht[s.toString()][h].toFixed(3)),2==j&&(O[(4*g+3).toString()].innerHTML=ht[s.toString()][h].toFixed(3))}var c=p.clientWidth;for(d=0;d<at.length;d++)n<at[d]+1&&n>at[d]-1&&(p.innerHTML=rt[d],a=rt[d],p.title=a);for(a=(a=p.style.fontSize).replace("px","");c<p.clientWidth;)p.style.fontSize=a-.1+"px",a=(a=p.style.fontSize).replace("px","")}}function ut(t,n){j=0;var i="",o="";O=new Array,I=new Array,R=new Array,n.style.fontFamily="calibri",n.style.fontSize="15px";var l='<tr style="height:auto;text-align:center">'+C+H+"<td>Name</td><td>Value</td>";n.innerHTML="","T"==U&&(n.innerHTML+=l),1==N&&(o='<td width="40px"><input type="checkbox" checked onchange="'+e+'.checkchange()"></td>',j++),1==B&&(i='<td width="40px"><input type="color" onchange="'+e+'.colorchange()" style="border:0;background-color:transparent"></td>',j++);for(var a=0;a<t;a++)n.innerHTML+='<tr style="height:auto;text-align:center">'+o+i+"<td>3</td><td>4</td></tr>";O=n.getElementsByTagName("td");var r=Object.keys(nt);for(a=0;a<tt;a++){var s=a+1;0==j&&(O[(2*s+0).toString()].innerHTML=r[a]),1==j&&(O[(3*s+1).toString()].innerHTML=r[a]),2==j&&(O[(4*s+2).toString()].innerHTML=r[a])}if(1==N)if(1==N&&1==B)for(a=0;a<n.getElementsByTagName("input").length/2;a++)I.push(n.getElementsByTagName("input")[2*a]);else if(1==N&&0==B)for(a=0;a<n.getElementsByTagName("input").length;a++)I.push(n.getElementsByTagName("input")[a]);var h=n.getElementsByTagName("tr");for(a=0;a<t;a++)h[a+1].style.color=et[r[a]].Linecolor;if(1==B)if(1==N&&1==B)for(a=0;a<n.getElementsByTagName("input").length/2;a++)n.getElementsByTagName("input")[2*a+1].value=et[r[a]].Linecolor,R.push(n.getElementsByTagName("input")[2*a+1]);else if(0==N&&1==B)for(a=0;a<n.getElementsByTagName("input").length;a++)n.getElementsByTagName("input")[a].value=et[r[a]].Linecolor,R.push(n.getElementsByTagName("input")[a])}function yt(t){var e;q=1,J=t/100,_*t/100,Z=0,Y=_,0==(e=2)&&(J*_*(q+1)<_?(Z=J*_*(++q-1),Z=Math.ceil(Z),Y=J*_*q,D=!1):0==D?(Y=_-1,Z=_-J*_,Z=Math.ceil(Z),q++,D=!0):(Y=_-1,Z=_-J*_,Z=Math.ceil(Z))),1==e&&(J*_*(q-2)>=0?(Z=J*_*(--q-1),Z=Math.ceil(Z),Y=J*_*q,D=!1):0==D?(Z=0,Y=J*_-1,D=!0,q--):(Z=0,Y=J*_-1)),2==e&&(Z=J*_*(q-1),Z=Math.ceil(Z),Y=J*_*q),pt(),pt()}function ft(t,e,n,i){var o=t.clientWidth,l=t.clientHeight,a=e,r=o/(e-1),s=l/30,h=t.getContext("2d");h.beginPath(),h.lineWidth=n,h.strokeStyle=i,h.lineCap="butt",h.translate(.5,.5);for(var d=0;d<a-1;d++)h.moveTo(d*r,0),h.lineTo(d*r,l);for(d=0;d<s;d++)h.moveTo(0,30*d),h.lineTo(o,30*d);h.stroke()}function pt(){!function(){for(var t=0,e=0,n=Object.keys(nt),i=0;i<n.length;i++)for(var o=0;o<nt[n[i]].length;o++)isNaN(nt[n[i]][o])||(nt[n[i]][o]>t&&(t=nt[n[i]][o]),nt[n[i]][o]<e&&(e=nt[n[i]][o]));K=5+parseFloat(t),Q=parseFloat(e)-5,0==$&&(K=ot,Q=lt)}(),function(){var t=a;t.height=t.clientHeight,t.width=t.clientWidth;var e=t.getContext("2d");e.measureText(Q).height,e.measureText(Q).width,e.measureText(K).height,e.measureText(K).width,e.font=T+"px "+x,e.fillStyle=w,e.textAlign="right",e.fillText(K.toFixed(2),t.width,15),e.fillText(Q.toFixed(2),t.width,t.height);var n=(K-Q)/2+Q;n=n.toFixed(2);var i=t.height/2;e.fillText(n,t.width,i)}();var t=r,e=Object.keys(nt);st=new Array,ht=new Array;var n=t.clientWidth,i=t.clientHeight,o=n/(Y-Z),l=K,d=Q;t.width=t.offsetWidth,t.height=i,t.style.width=t.width+"px",t.style.height=t.height+"px";for(var g=0,c=0;c<e.length;c++){var u=!1;1==N&&(u=I[c].checked),st[c.toString()]=new Array,ht[c.toString()]=new Array;var y=0,f=t.getContext("2d");f.translate(.5,.5);for(var p=0+Z;p<Y;p++)null!=nt[e[c]][p]&&null!=nt[e[c]][p+1]||y++;var m=et[e[c]].Linecolor,v=et[e[c]].linewidth,b=et[e[c]].ldotenable,S=et[e[c]].ldoteradius,k=et[e[c]].ldotecolor,E=Math.abs(parseFloat(l))+Math.abs(parseFloat(d));for(p=0+Z;p<Y;p++)if(null!=nt[e[c]][p]&&null!=nt[e[c]][p+1]){if(p==0+Z&&(g=o*(p+y-Z)),u||0==N){f.beginPath(),f.lineWidth=v;var M=(0-d)*i/E;f.strokeStyle=m,f.moveTo(o*(p+y-Z),i-(nt[e[c]][p]*i/E+M)),f.lineTo(o*(p+1+y-Z),i-(nt[e[c]][p+1]*i/E+M)),f.stroke()}st[c.toString()].push(o*(p+y-Z)),ht[c.toString()].push(nt[e[c]][p]),1==b&&(u||0==N)&&(f.beginPath(),f.fillStyle=k,f.strokeStyle=k,f.arc(o*(p+y-Z),i-(nt[e[c]][p]*i/E+M),S,0,2*Math.PI),f.fill(),f.stroke())}else(u||0==N)&&(f.beginPath(),f.lineWidth=v,f.strokeStyle=m,f.moveTo(o*(p+y-Z),i),f.lineTo(o*(p+1+y-Z),i),f.stroke()),1==b&&(u||0==N)&&(f.fillStyle=k,f.strokeStyle=k,f.beginPath(),f.arc(o*(p+y-Z),i,S,0,2*Math.PI),f.fill(),f.stroke())}!function(t,e){at=new Array,rt=new Array;var n=s;n.height=n.clientHeight,n.width=n.clientWidth;var i=n.getContext("2d");i.font=T+"px "+x,i.fillStyle=w;var o=it[it.length-1];i.measureText(o).width,i.fillText(it[Z],t,20),i.textAlign="right",i.fillText(it[e.toFixed(0)-1],n.width,20),i.fillText(it[Math.round((e+Z)/2)],n.width/2,20);for(var l=0+Z;l<Y;l++)at.push((l-Z)*n.clientWidth/(Y-Z)),rt.push(it[l])}(g,Y),-1==dt&&(dt=h.clientWidth-5),ct(h,h.clientHeight,dt,!0)}!function(){1==N&&(C='<td width="40px"></td>');1==B&&(H='<td width="40px">Color</td>');1==L&&(W='<div  style="position:absolute;left:5px;bottom:0px"><button style="float: left" title="Zoom In" onclick="'+e+'.zoomit(true)">+</button><span style="float: left;font-family: calibri;padding: 0px 4px 0px 4px;font-size:15px">0%</span><button style="float: right;" title="Zoom Out" onclick="'+e+'.zoomit(false)">-</button></div>');1==A&&(z='<div  style="position:absolute;right:3px;bottom:0"><button style="float: left" title="Scroll left" onclick="'+e+'.scroll0(1)">&lt;</button><button title="Scroll right" style="float: right" onclick="'+e+'.scroll0(0)">&gt;</button></div>');document.getElementById(t).innerHTML+='<table style="width:100%;height: 100%;border-collapse: collapse;border-spacing: 0;" border="0"><tr style="height: 60%"><td style="width: 15%;padding: 0px"><canvas style="padding: 0px;width: 100%;height: 100%;background-color: transparent;postion;absolute;top:0;left:0"></canvas></td><td style="width: 85%;position:relative"><canvas style="width: 100%;height: 100%;background-color: rgba(240,255,255,0.0);position:absolute;top:0px;left:0px;z-index:5;"></canvas><canvas style="z-index:6;width: 100%;height: 100%;background-color: rgba(0,67,223,0.0);position:absolute;top:0px;left:0px"></canvas><canvas style="z-index:4;width: 100%;height: 100%;background-color: rgba(88,121,199,0.00);position:absolute;top:0px;left:0px"></canvas></td></tr><tr><td style="width: 15%;text-align:center;"></td><td style="width: 85%;padding: 0;position:relative"><canvas style="width: 100%;height: 0%;background-color: transparent;margin: 0;position:absolute;top:0;left:0"></canvas>'+W+z+'</td></tr><tr style="height: 24%"><td style="width: 15%;">.</td><td style="width: 85%;"><div style="width: 100%;height: 100%;margin: 0;padding: 0;overflow: auto;position:relative"><table style="width:100%;height: 100%;border-collapse: collapse;border-spacing: 0;" border="1"><tr style="height:auto;text-align:center">'+C+H+"<td>Name</td><td>Value</td></tr></table></div></td></tr></table>";var n=document.getElementById(t),i=n.clientHeight,o=(n.clientWidth,(u=n.getElementsByTagName("table")[0]).getElementsByTagName("tr")[0]),l=u.getElementsByTagName("tr")[1],x=u.getElementsByTagName("tr")[2];y=o.getElementsByTagName("td")[0],f=o.getElementsByTagName("td")[1],p=l.getElementsByTagName("td")[0],m=l.getElementsByTagName("td")[1],v=x.getElementsByTagName("td")[0],b=x.getElementsByTagName("td")[1],a=y.getElementsByTagName("canvas")[0],r=f.getElementsByTagName("canvas")[0],s=m.getElementsByTagName("canvas")[0],h=f.getElementsByTagName("canvas")[1],d=f.getElementsByTagName("canvas")[2],f.getElementsByTagName("div")[0],g=b.getElementsByTagName("table")[0],c=m.getElementsByTagName("span")[0],v.innerHTML='<span style="font-family:calibri;font-size:12px;position:absolute;left:3px;bottom:1px;color:rgba(0,0,0,0.77)"><i><b>'+gt+U+X+"</b>"+V+M+"</i></span>",v.style="position:relative;",T="azure",y.style.backgroundColor=T,p.style.backgroundColor=T,m.style.backgroundColor=T,v.style.backgroundColor=T,o.style.height=.6*i+"px",l.style.height=.15*i+"px",x.style.height=.24*i+"px",b.style.height=.24*i+"px",p.style.fontFamily="calibri",p.style.fontSize="15px",a.style.width=y.clientWidth-4+"px",a.style.height=.6*i-4+"px",r.style.width=f.clientWidth-4+"px",r.style.height=.6*i-4+"px",h.style.width=f.clientWidth-4+"px",h.style.height=.6*i-4+"px",h.width=h.offsetWidth,h.height=.6*i-4,d.style.width=f.clientWidth-4+"px",d.style.height=.6*i-4+"px",d.width=d.offsetWidth,d.height=.6*i-4,ft(d,10,k,S),s.style.width=m.clientWidth-4+"px",s.style.height=.15*i-4+"px","J"==V&&h.addEventListener("mousedown",function(t){F=!0},!1);var T;h.addEventListener("mouseup",function(t){F=!1},!1),h.addEventListener("mousemove",function(t){var e=function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}(h,t);ct(h,.6*i-4,e.x,!1)},!1),h.addEventListener("touchmove",function(t){!function(t,e,n){var i=t.getBoundingClientRect(),o=n.touches[0].clientX-i.left;dt=o;var l=E,a=P;t.width=t.offsetWidth,t.height=e;var r,s=t.getContext("2d");s.beginPath(),s.lineWidth=a,s.strokeStyle=l,s.lineCap="butt","S"==M&&s.moveTo(o,0);s.lineTo(o,e),s.stroke();for(var h=0;h<tt;h++)for(var d=0,g=0;g<st[h.toString()].length;g++)if(o<st[h.toString()][g]+1&&o>st[h.toString()][g]-1){d=g;var c=h+1;0==j&&(O[(2*c+1).toString()].innerHTML=ht[h.toString()][d].toFixed(3)),1==j&&(O[(3*c+2).toString()].innerHTML=ht[h.toString()][d].toFixed(3)),2==j&&(O[(4*c+3).toString()].innerHTML=ht[h.toString()][d].toFixed(3))}var u=p.clientWidth;for(g=0;g<at.length;g++)o<at[g]+1&&o>at[g]-1&&(p.innerHTML=rt[g],r=rt[g],p.title=r);r=(r=p.style.fontSize).replace("px","");for(;u<p.clientWidth;)p.style.fontSize=r-.1+"px",r=(r=p.style.fontSize).replace("px","")}(h,.6*i-4,t)},!1)}(),this.RefreshChart=function(){pt()},this.pushvalue=function(t,e){nt[t].push(e),nt[t].shift()},this.updatebackgroundcolor=function(t){y.style.backgroundColor=t,p.style.backgroundColor=t,m.style.backgroundColor=t,v.style.backgroundColor=t},this.pushlabel=function(t){it.push(t),it.shift()},this.updatelinecolor=function(t,e){et[t].Linecolor=e,ut(tt,g)},this.updatelinewidth=function(t,e){et[t].linewidth=e},this.updatelinedot=function(t,e){et[t].ldotenable=e},this.updatedotradius=function(t,e){et[t].ldoteradius=e},this.updatedotColor=function(t,e){et[t].ldotecolor=e},this.getarray=function(t){return nt[t]},this.getlabelarray=function(){return it},this.getlabelarrayat=function(t){return it[t]},this.getarrayvalueat=function(t,e){return nt[t][e]},this.updatearrayvalueat=function(t,e,n){nt[t][e]=n},this.updatelabelarrayvalueat=function(t,e){it[t]=e},this.updateymax=function(t){ot=t,pt()},this.updateymin=function(t){lt=t,pt()},this.updateayscale=function(t){$=t,pt()},this.updatetablefont=function(t,e){g.style.fontFamily=t,g.style.fontSize=e+"px"},this.updatelabelfont=function(t,e,n){w=n,x=t,T=e,p.style.fontStyle=t,p.style.fontSize=e+"px",p.style.color=n},this.updategrid=function(t,e){ft(d,10,k=e,S=t)},this.updataxisruler=function(t,e){E=t,P=e},this.updatetablebackgroundcolor=function(t){g.style.backgroundColor=t},this.updatetableborderstyle=function(t){g.style.border=t},this.updatechartbackground=function(t){f.style.backgroundColor=t},this.checkchange=function(){pt()},this.colorchange=function(){for(var t=Object.keys(nt),e=new Array,n=new Array,i="",o=0;o<tt;o++)et[t[o]].Linecolor!=R[o].value&&(i=o),et[t[o]].Linecolor=R[o].value,et[t[o]].ldotecolor=R[o].value,e.push(R[o].value),n.push(t[o]);ut(tt,g),pt(),"function"==typeof oncolorchange&&oncolorchange(i,n,e)},this.scroll0=function(t){Z=0,Y=_,0==t&&(J*_*(q+1)<_?(Z=J*_*(++q-1),Z=Math.ceil(Z),Y=J*_*q,D=!1):0==D?(Y=_-1,Z=_-J*_,Z=Math.ceil(Z),q++,D=!0):(Y=_-1,Z=_-J*_,Z=Math.ceil(Z))),1==t&&(J*_*(q-2)>=0?(Z=J*_*(--q-1),Z=Math.ceil(Z),Y=J*_*q,D=!1):0==D?(Z=0,Y=J*_-1,D=!0,q--):(Z=0,Y=J*_-1)),2==t&&(Z=J*_*(q-1),Z=Math.ceil(Z),Y=J*_*q),pt()},this.zoomit=function(t){1==t&&++G>3&&(G=3),0==t&&--G<0&&(G=0),0==G&&(yt(100),c.innerHTML="0%"),1==G&&(yt(75),c.innerHTML="25%"),2==G&&(yt(50),c.innerHTML="50%"),3==G&&(yt(25),c.innerHTML="75%")},this.updatearray=function(t,e){nt[t]=null,nt[t]=new Array;for(var n=0;n<_;n++)null!=e[n]&&nt[t].push(e[n])},this.updateXarray=function(t){it=null,it=new Array;for(var e=0;e<_;e++)null!=t[e]&&it.push(t[e])},this.settotalpoints=function(t){Y=_=t,it=null,it=new Array;for(var e=Object.keys(nt),n=0;n<e.length;n++){nt[e[n]]=new Array;for(var i=0;i<_;i++)nt[e[n]].push(0)}for(n=0;n<_;n++)it.push(0);pt()},this.addparameter=function(t){for(var e=!1,n=0;n<nt.length;n++)nt[n]==t&&(e=!0);if(0==e)for(nt[t]=new Array,et[t]=new Array,et[t].Linecolor="#ae2ed0",et[t].linewidth=2,et[t].ldotenable=!0,et[t].ldoteradius=1,et[t].ldotecolor="#ae2ed0",n=0;n<_;n++)nt[t].push(0);var i=Object.keys(nt);tt=i.length,null!=g&&ut(tt,g)}}}
